<!DOCTYPE html>

<html lang="en-US">

  <head>

    <meta charset="utf-8">

    <title>Assignment #5</title>

    <!-- external styles -->

    <link rel="stylesheet" href="styles/mainstyle.css">
    <link rel="stylesheet" href="styles/buttonstyles.css">

    <!-- external scripts-->

    <!-- internal scripts -->

  </head>

  <body>

    <div id="header">
        <h1 id="page-header">Zach Dehnert | CIS 133JS Intro to JavaScript</h1>
        <img id="profile-pic" src="images/profile_pic.jpg">
    </div>
        
    <div id="index-body-header">
    <h2><a href="index.html">Home</a></h2>
    </div>

    <h3 style="clear:both;">Assignment #5 - JavaScript Strings and RegEx</h3>

    <section class="sec-containers">

        <h4 style="margin:0;padding:0 0 2% 0;">Part 1 | Counting Characters</h4>

        <div>

            <textarea id="textArea" rows="21" cols="77" style="margin:0 2% 1% 0; float:left;"></textarea>

            <textarea id="textOut" rows="21" cols="77" style="margin:0 2% 1% 0; float:left;"></textarea>

        </div>

        <div style="clear:both;">

            <p style="float:left;">Characters Left: </p>

            <p id="pCharCount">255</p>

        </div>

        <input id="submitBtn" type="button" value="Submit">

    </section>

    <section class="sec-containers">

        <h4 style="margin:0;padding:0 0 2% 0;">Part 2 | Close Enough</h4>

        <p>What was that movie about Dodgeball? Answer: Dodgeball True Underdog Story</p>
        <input style="width:30%;" id="guessText" type="text"><br>
        <div style="margin:1% 0 0 0;">
            <p style="float:left;">Points: </p>
            <p id="outputPoints">0</p>
        </div>
        <input id="submitBtn-2" type="button" value="Submit">



    </section>

    <section class="sec-containers">

        <h4 style="margin:0;padding:0 0 2% 0;">Part 3 | Profanity Filter</h4>

        <textarea id="textAreaProf" rows="21" cols="77" style="margin:0 2% 1% 0;">The seven dirty words are seven English-language words that American comedian George Carlin first listed in 1972 in his monologue "Seven Words You Can Never Say on Television". The words are: shit, piss, fuck, cunt, cocksucker, motherfucker, and tits.

        The words are: Shit, Piss, Fuck, Cunt, Cocksucker, Motherfucker, and Tits.
            
        The words are: SHIT, PISS, FUCK, CUNT, COCKSUCKER, MOTHERFUCKER, and TITS.
            
        The words are: Mr.Shit, Mr.Piss, Mr.Fuck, Mr.Cunt, Mr.Cocksucker, Mr.Motherfucker, and Mr.Tits.
            </textarea>
        <br>
        <input type="button" id="submitBtnProf" value="Submit">

    </section>

    <section class="sec-containers">

        <h4 style="margin:0;padding:0 0 2% 0;">Part 4 | Hex Overkill</h4>

        <input type="text" id="inputHex" placeholder="">

        <input type="button" id="submitBtnHex" value="Submit">
        <p>Entered Hexcode: </p>
        <p id="hexOutput"></p>


    </section>

    <script>
    console.log("******* Internal JS is Connected *******");
    console.log("Part 2 Answer: DodgeBall True Underdog Story");

//***********************************************************
// Script for Part 1
//***********************************************************

    function charCount() {
        //console.log("charCount function is working");
        let textEntered = document.getElementById('textArea').value;
        let charCount = textEntered.length;
        //console.log(textEntered);
        //console.log(charCount);
        charCountCrunched = 255 - charCount;
        //console.log(charCountCrunched);
        document.getElementById("pCharCount").innerHTML = charCountCrunched;
        if (charCountCrunched < 0) {
            //console.log("if statement is connected");
            document.getElementById("textArea").style.border = "2px solid #FF0000";
            document.getElementById("pCharCount").style.color = "#FF0000";
            document.getElementById("pCharCount").style.fontWeight = "bold";
        } else if (charCountCrunched >= 0) {
            //console.log("if statement 2 is connected");
            document.getElementById("textArea").style.border = "2px solid #222";
            document.getElementById("pCharCount").style.color = "#000";
            document.getElementById("pCharCount").style.fontWeight = "normal";
        }
    }

    function outputText() {
        //console.log("Button is connected");
        let textEntered = document.getElementById('textArea').value;
        let charCount = textEntered.length;
        let charCountCrunched = 255 - charCount;
        document.getElementById("textOut").textContent = textEntered;
        if (charCountCrunched < 0) {
            //console.log("text move is connected");
            let cutOffText = textEntered.substring(0, 255);
            document.getElementById("textOut").textContent = cutOffText;
        }
    }

    document.getElementById("textArea").addEventListener("input", charCount)
    document.getElementById("submitBtn").addEventListener("click", outputText);

//***********************************************************
// End of Part 1
//***********************************************************

//***********************************************************
// Script Part 2
//***********************************************************

    function questionCheck() {
        //console.log("Question function connected");
        var guess = document.getElementById("guessText").value;
        //console.log(guess);
        //var regGuess = new RegExp(guess);
        //var regGuess = new String(guess);
        var splitGuess = guess.split(" ");
        //console.log(splitGuess);
        //console.log(splitGuess.length);

        var sumCrunch = 0;
        var points = 0;
        var guessCheck = "Dodgeball True Underdog Story";
        var count = 0;

        for (i = 0; i < splitGuess.length; i++) {
            
            var crunch = guessCheck.indexOf(splitGuess[i]);
            console.log(crunch);

            if (crunch == 0) {
                count += 1;
            } else if (crunch == 10) {
                count += 1;
            } else if (crunch == 15) {
                count += 1;
            } else if (crunch == 24) {
                count += 1;
            }

            if (count == 4) {
                document.getElementById("outputPoints").innerHTML = "1";
            }

        }

        console.log(splitGuess);
        var splitAnswer = guessCheck.split(" ");
        console.log(splitAnswer)
        var newCount = 0;

        for (i = 0; i < splitAnswer.length; i++) {

            if (splitGuess[i] == splitAnswer[i]) {
                newCount += 1;
            }

        }

        console.log(newCount);

        if (newCount == 4) {
            document.getElementById("outputPoints").innerHTML = "2";
        }


    }

    document.getElementById("submitBtn-2").addEventListener("click", questionCheck)

//***********************************************************
// End of Part 2
//***********************************************************

//***********************************************************
// Script Part 3
//***********************************************************

    var badWords = ["Shit","Piss","Fuck","Cunt","Cocksucker","Motherfucker","Tits"]

    var para = document.getElementById("textAreaProf");
    //console.log(para);


    function profFilter() {
        //console.log("Profanity Filter connected");

        for (i = 0; i < badWords.length; i++) {
            let find = badWords[i];
            let pattern = new RegExp(find, 'i');
            console.log(find);
            console.log(para.value);
            while(para.value.indexOf(find) >= 0) {
                    para.value = para.value.replace(pattern, "#!@%$#");
            } //End of while loop

        }

    }

    document.getElementById("submitBtnProf").addEventListener("click", profFilter)

//***********************************************************
// End of Part 3
//***********************************************************

//***********************************************************
// Script Part 4
//***********************************************************

    function hexCheck() {
        //console.log("Hex Check Function connected");

        //document.getElementById("submitBtnHex").value = "Submit";

        var inputHex = document.getElementById("inputHex").value;

        var pass = "true";

        console.log("Inputted Text: " + inputHex);

        checkForBlank(inputHex);

        if (pass == "false") {
            return;

        }

        checkLength(inputHex);

        checkHash(inputHex);

        checkChars(inputHex);

        if (pass == "false") {
            return;

        }

        changeBackground(inputHex);

        inputHex = inputHex.toUpperCase();

        document.getElementById("hexOutput").innerHTML = inputHex;



        function checkForBlank(inputHex) {

            if (inputHex == "") {
                document.getElementById("submitBtnHex").value = "Please Enter a Hex Code";
                document.getElementById("inputHex").focus();
                document.getElementById("inputHex").value = "#222000";
                pass = "false";
            }


        }

        function checkLength() {

            if (inputHex.length == 4) {
                document.getElementById("submitBtnHex").value = "You entered a 3-character hexcode";
            } else {
                document.getElementById("submitBtnHex").value = "You entered a 6-character hexcode";
            }

        }

        function checkHash() {

            firstChar = inputHex.charAt(0);
            console.log("First Character: " + firstChar);

            if (firstChar != "#") {
                document.getElementById("submitBtnHex").value = "Hexcodes normally have a '#' in front";
                inputHex = "#" + inputHex;

            }
        }

        //console.log("Second Input Check: " + inputHex);

        function checkChars(inputHex) {

            newInput = inputHex.split("");
            //console.log("New Array from Input: " + newInput);

            for (i = 1; i < newInput.length; i++) {
                //console.log("Step " + i + " check");

                if (newInput[i].match(/[a-f]/i) || newInput[i].match(/[0-9]/)) {
                    console.log("letter character check good");

                } else {
                    pass = "false"
                    document.getElementById("submitBtnHex").value = "Must be between 0-9 and A-F";
                }

            }

            for (i = 1; i < newInput.length; i++) {
                console.log("Step " + i + " check");

                if (newInput[i].match(/[o]/i)) {
                    console.log("They used an 'O'");
                    newInput[i] = 0;
                    document.getElementById("submitBtnHex").value = "'O's were changed to zeros, press again";
                } 

            }

            console.log(newInput);
            inputHex = newInput.toString();
            console.log(inputHex);
            inputHex = inputHex.replace(/,/g, '');
            console.log(inputHex);
            document.getElementById("inputHex").value = inputHex;


        }

        function changeBackground(inputHex) {
            //console.log("Change Background Function is connected");
            //document.getElementById("submitBtnHex").value = "Submit"
            document.body.style.backgroundColor = inputHex;
        }


    }

    document.getElementById("submitBtnHex").addEventListener("click", hexCheck)

    </script>

  </body>

</html>